<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        /* Body and HTML - Ensure full height for centering */
        html,
        body {
            height: 100%;
            margin: 0;
            font-family: 'Roboto', sans-serif;
        }

        /* Background and positioning */
        body {
            background: url('https://images.pexels.com/photos/8052681/pexels-photo-8052681.jpeg') no-repeat center center fixed;
            background-size: cover;
        }

        /* Centering container vertically and horizontally */
        .container {
            background: rgba(255, 255, 255, 0.7);
            /* Semi-transparent white background */
            max-width: 680px;
            margin: 0 auto;
            /* Center horizontally */
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-top: 18px;
        }

        /* Heading styling */
        h2 {
            text-align: center;
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* Form Group */
        .form-group {
            margin-bottom: 12px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            border-radius: 6px;
            padding: 6px 10px;
            border: 1px solid #ddd;
            font-size: 14px;
            width: 100%;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border: 2px solid #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }

        /* Button styling */
        .btn {
            font-size: 14px;
            width: 100%;
            border-radius: 6px;
            height: 40px;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-outline-link {
            font-size: 14px;
            text-decoration: none;
        }

        .form-check-input {
            width: 16px;
            height: 16px;
        }
    </style>

</head>

<body>
    <div class="container">
        <h2>Student Profile</h2>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            {% if messages %}
            <div>
                {% for message in messages %}
                {% if message.tags == 'success' %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% elif message.tags == 'error' %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% elif message.tags == 'warning' %}
                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% elif message.tags == 'info' %}
                <div class="alert alert-info alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% else %}
                <div class="alert alert-secondary alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="rollno">Roll Number (Username):</label>
                    <input type="text" class="form-control" id="rollno" name="rollno" value="{{ rollno }}" readonly>
                </div>

                <div class="col-md-6 form-group">
                    <label for="full_name">Full Name:</label>
                    <input type="text" name="full_name" value="{{ full_name }}" class="form-control" required />
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="college_email">College Email:</label>
                    <input type="email" class="form-control" id="college_email" name="college_email"
                        value="{{ form.college_email.value }}" required>
                </div>

                <div class="col-md-6 form-group">
                    <label for="personal_email">Personal Email:</label>
                    <input type="email" class="form-control" id="personal_email" name="personal_email"
                        value="{{ form.personal_email.value }}" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="ssc_percentage">SSC Percentage:</label>
                    <input type="number" class="form-control" id="ssc_percentage" name="ssc_percentage"
                        value="{{ form.ssc_percentage.value }}" required step="0.01" min="0" max="100">
                </div>

                <div class="col-md-6 form-group">
                    <label for="inter_diploma_percentage">Inter/Diploma Percentage:</label>
                    <input type="number" class="form-control" id="inter_diploma_percentage"
                        name="inter_diploma_percentage" value="{{ form.inter_diploma_percentage.value }}" required
                        step="0.01" min="0" max="100">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="btech_cgpa">BTech CGPA:</label>
                    <input type="number" class="form-control" step="0.01" id="btech_cgpa" name="btech_cgpa"
                        value="{{ form.btech_cgpa.value }}">
                </div>

                <div class="col-md-6 form-group">
                    <label for="department">Branch (Department):</label>
                    <input type="text" class="form-control" id="department" name="department"
                        value="{{ form.department.value }}" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="year_of_study">Year of Study:</label>
                    <input type="number" class="form-control" id="year_of_study" name="year_of_study"
                        value="{{ form.year_of_study.value }}" required>
                </div>

                <div class="col-md-6 form-group">
                    <label for="gender">Gender:</label>
                    <select class="form-control" id="gender" name="gender">
                        <option value="" disabled {% if not form.gender.value %}selected{% endif %}>Select Gender
                        </option>
                        <option value="M" {% if form.gender.value == "M" %}selected{% endif %}>Male</option>
                        <option value="F" {% if form.gender.value == "F" %}selected{% endif %}>Female</option>
                        <option value="O" {% if form.gender.value == "O" %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="resume">Resume:</label>
                    <input type="file" class="form-control-file" id="resume" name="resume" accept=".pdf, .doc, .docx">
                    {% if form.resume.value %}
                    <p>Current Resume: <a href="{{ form.resume.value.url }}" target="_blank">View</a></p>
                    {% endif %}
                </div>

                <div class="col-md-6 form-group">
                    <label for="phone_number">Phone Number:</label>
                    <input type="tel" class="form-control" id="phone_number" name="phone_number"
                        value="{{ form.phone_number.value }}" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="profile_picture">Profile Picture (Optional):</label>
                    <input type="file" class="form-control-file" id="profile_picture" name="profile_picture"
                        accept="image/*">
                </div>

                <div class="col-md-6 form-group">
                    <label for="password">Change Password (Optional):</label>
                    <div class="input-group position-relative">
                        <input type="password" class="form-control" id="password" name="password" value="{{ password }}">
                        <i id="toggleIcon" class="bi bi-eye-slash"
                           onclick="togglePassword()"
                           style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.5rem; color: #000000;">
                        </i>
                    </div>
                </div>
                
            </div>
            <div class="row">
                <div class="col-md-6 form-group">
                    <label for="passed_out_year">Passed Out Year:</label>
                    <input type="number" class="form-control" id="passed_out_year" name="passed_out_year"
                        value="{{ form.passed_out_year.value }}" required>
                </div>

                <div class="col-md-6 form-group">
                    <label for="academic_year">Academic Year:</label>
                    <input type="text" class="form-control" id="academic_year" value="{{ academic_year }}" readonly>
                </div>

            </div>


            <div class="text-center mt-4">
                <div class="d-flex justify-content-center gap-3">
                    <button type="submit" class="btn btn-primary"
                        style="width: 200px; font-size: 14px; padding: 8px 12px;">Update Profile</button>

                    <button onclick="location.href='{% url 'student_details' %}'" class="btn btn-secondary"
                        style="width: 200px; font-size: 14px; padding: 8px 12px;">Back to Dashboard</button>

                    <button onclick="location.href='{% url 'stulogout' %}'" class="btn btn-danger"
                        style="width: 200px; font-size: 14px; padding: 8px 12px;">Logout</button>
                </div>
            </div>

        </form>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function togglePassword() {
            const passwordField = document.getElementById("password");
            const icon = document.getElementById("toggleIcon");
            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.remove("bi-eye-slash");
                icon.classList.add("bi-eye");
            } else {
                passwordField.type = "password";
                icon.classList.remove("bi-eye");
                icon.classList.add("bi-eye-slash");
            }
        }
    </script>
</body>

</html>